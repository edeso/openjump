<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.openjump</groupId>
    <artifactId>OpenJUMP</artifactId>
    <!-- update before every release accordingly -->
    <version>2.0</version>
    <scm>
        <connection>scm:git:https://github.com/openjump-gis/openjump.git</connection>
        <developerConnection>scm:git:https://github.com/openjump-gis/openjump.git</developerConnection>
        <tag>main</tag>
        <url>https://github.com/openjump-gis/openjump/tree/main</url>
    </scm>
    <properties>
        <!-- setup some defaults used or overridden later -->
        <version.number>${build.datestamp}</version.number>
        <version.release>mvn build</version.release>
        <version.revision>${git.total.commit.count}(${git.commit.id.abbrev})</version.revision>
        <version.buildDateLong>${build.datelong}</version.buildDateLong>
        <version.string>${git.branch}(${git.commit.id.abbrev})</version.string>

        <project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding>
        <project.binaries>**/*.command,**/*.sh,**/*.bat,**/*.exe,**/MacOS/OpenJUMP</project.binaries>
        <maven-assembly-plugin.version>3.3.0</maven-assembly-plugin.version>
        <maven-antrun-plugin.version>3.0.0</maven-antrun-plugin.version>
        <maven-jar-plugin.version>3.2.0</maven-jar-plugin.version>
        <jts.version>1.18.1</jts.version>
        <imageio-ext.version>1.3.2</imageio-ext.version>
    </properties>
    <profiles>
        <profile>
            <id>windows</id>
            <activation>
                <os>
                    <family>windows</family>
                </os>
            </activation>
            <properties>
                <launch4j.dir>launcher/launch4j-3.0.2-win32</launch4j.dir>
            </properties>
        </profile>
        <profile>
            <id>unix</id>
            <activation>
                <os>
                    <family>unix</family>
                </os>
            </activation>
            <properties>
                <launch4j.dir>launcher/launch4j-3.0.2-linux</launch4j.dir>
            </properties>
        </profile>
        <profile>
          <id>snapshot</id>
          <properties>
            <!-- essential props used in etc/readme.txt and Version.java -->
            <version.number>${build.datestamp}</version.number>
            <version.release>snapshot</version.release>
            <!-- props used by jar and assembly naming -->
            <version.string>${version.number}-r${version.revision}</version.string>
            <build.name>${project.artifactId}-${version.string}</build.name>
          </properties>
          <build>
            <plugins>
              <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>${maven-jar-plugin.version}</version>
                <executions>
                  <execution>
                    <id>nolang</id>
                    <phase>package</phase>
                    <goals>
                      <goal>jar</goal>
                    </goals>
                    <configuration>
                      <classifier>nolang</classifier>
                      <excludes>
                        <exclude>language/**</exclude>
                      </excludes>
                    </configuration>
                  </execution>
                </executions>
              </plugin>
              <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>${maven-assembly-plugin.version}</version>
                <configuration>
                  <appendAssemblyId>false</appendAssemblyId>
                </configuration>
                <executions>
                  <execution>
                    <id>snap-core</id>
                    <phase>package</phase>
                    <configuration>
                      <appendAssemblyId>false</appendAssemblyId>
                      <finalName>${build.name}-CORE</finalName>
                      <descriptors>
                        <descriptor>etc/mvn/bin_zip-core_snapshot.xml</descriptor>
                      </descriptors>
                    </configuration>
                    <goals>
                      <goal>single</goal>
                    </goals>
                  </execution>
                  <execution>
                    <id>snap-plus</id>
                    <phase>package</phase>
                    <configuration>
                      <appendAssemblyId>false</appendAssemblyId>
                      <finalName>${build.name}-PLUS</finalName>
                      <descriptors>
                        <descriptor>etc/mvn/bin_zip-plus_snapshot.xml</descriptor>
                      </descriptors>
                    </configuration>
                    <goals>
                      <goal>single</goal>
                    </goals>
                  </execution>
                </executions>
              </plugin>
              <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-install-plugin</artifactId>
                <executions>
                  <execution>
                    <id>custom-install-jar</id>
                    <phase>none</phase>
                  </execution>
                </executions>
              </plugin>
            </plugins>
          </build>
        </profile>
        <profile>
            <id>release</id>
            <properties>
              <!-- set <version/> property above accordingly, but
                   can be be overridden on maven run with e.g.
                   -D version.number=X.X.X -D version.release=alpha -->
              <version.number>${project.version}</version.number>
              <version.release>release</version.release>
              <recompress.jars>true</recompress.jars>
              <!-- props used by jar and assembly naming -->
              <version.string>${version.number}-r${version.revision}</version.string>
              <build.name>${project.artifactId}-${version.string}</build.name>
            </properties>
            <build>
                <plugins>
                    <plugin>
                      <groupId>org.apache.maven.plugins</groupId>
                      <artifactId>maven-jar-plugin</artifactId>
                      <version>${maven-jar-plugin.version}</version>
                      <executions>
                        <execution>
                          <id>nosrc</id>
                          <phase>package</phase>
                          <goals>
                            <goal>jar</goal>
                          </goals>
                          <configuration>
                            <classifier>nosrc</classifier>
                            <excludes>
                              <exclude>**/*.java</exclude>
                              <!-- excluding unit-test and doc resources -->
                              <exclude>**/*Test.class</exclude>
                              <exclude>fixtures/**</exclude>
                              <exclude>jumptest/**</exclude>
                              <exclude>versiondoc/**</exclude>
                            </excludes>
                          </configuration>
                        </execution>
                      </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-assembly-plugin</artifactId>
                        <version>${maven-assembly-plugin.version}</version>
                        <configuration>
                            <appendAssemblyId>false</appendAssemblyId>
                        </configuration>
                        <executions>
                            <execution>
                                <id>release core</id>
                                <phase>package</phase>
                                <configuration>
                                    <finalName>${build.name}-CORE</finalName>
                                    <descriptors>
                                        <descriptor>etc/mvn/bin_zip-core_stable.xml</descriptor>
                                    </descriptors>
                                    <useJvmChmod>true</useJvmChmod>
                                </configuration>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>release plus</id>
                                <phase>package</phase>
                                <configuration>
                                    <finalName>${build.name}-PLUS</finalName>
                                    <descriptors>
                                        <descriptor>etc/mvn/bin_zip-plus_stable.xml</descriptor>
                                    </descriptors>
                                </configuration>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                            </execution>
                        </executions>
                      </plugin>
                      <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-install-plugin</artifactId>
                        <executions>
                          <execution>
                            <id>custom-install-jar</id>
                            <phase>none</phase>
                          </execution>
                        </executions>
                      </plugin>
                      <!-- properly name release deployments -->
                      <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-deploy-plugin</artifactId>
                        <executions>
                          <execution>
                            <id>custom-deploy</id>
                            <configuration>
                              <file>${project.build.directory}/${build.name}.jar</file>
                              <version>${version.number}</version>
                              <classifier>r${version.revision}</classifier>
                            </configuration>
                          </execution>
                        </executions>
                      </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>portable</id>
            <properties>
                <portable.filename>${project.artifactId}-Portable-${version.string}</portable.filename>
                <portable.filepath>${project.build.directory}/recompress</portable.filepath>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-enforcer-plugin</artifactId>
                        <version>1.4.1</version>
                        <executions>
                            <execution>
                                <id>snapshot-or-release-is-active</id>
                                <goals>
                                    <goal>enforce</goal>
                                </goals>
                                <configuration>
                                    <rules>
                                        <requireActiveProfile>
                                            <profiles>snapshot,release</profiles>
                                            <all>false</all>
                                            <message>You need to select a profile to build the portable distro for!</message>
                                        </requireActiveProfile>
                                    </rules>
                                    <fail>true</fail>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>${maven-antrun-plugin.version}</version>
                        <executions>
                            <execution>
                                <id>unzip distros</id>
                                <phase>package</phase>
                                <configuration>
                                    <target>
                                        <property name="file.encoding" value="ISO-8859-1" />
                                        <!--property name="recompress.folder"
                                                  value="${project.build.directory}/recompress" /-->
                                        <echo>Cleanup</echo>
                                        <delete includeemptydirs="true" quiet="true">
                                            <fileset dir="${portable.filepath}"
                                                     followsymlinks="false" />
                                        </delete>
                                        <!-- Using an ant task to deflate *.zip -->
                                        <echo>Unzip CORE</echo>
                                        <unzip
                                            src="${project.build.directory}/${build.name}-CORE.zip"
                                            dest="${portable.filepath}/core">
                                            <cutdirsmapper dirs="1" />
                                        </unzip>
                                        <echo>Unzip PLUS</echo>
                                        <unzip
                                            src="${project.build.directory}/${build.name}-PLUS.zip"
                                            dest="${portable.filepath}/plus">
                                            <cutdirsmapper dirs="1" />
                                        </unzip>
                                    </target>
                                </configuration>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>recompress jars (release only)</id>
                                <phase>package</phase>
                                <configuration>
                                      <target if="${recompress.jars}">
                                        <!-- recompress jars -->
                                        <taskdef name="p200ant"
                                                 classname="org.xblackcat.ant.p200ant.P200AntTask"
                                                 classpath="launcher/p200ant-1.1/pack200-ant-task-1.1.jar" />
                                        <fileset id="jars2pack" dir="${portable.filepath}/">
                                            <include name="**/*.jar" />
                                            <!-- exclude signed jars, circumvent security errors
                                            e.g. "SecurityException: SHA1 digest error" -->
                                            <exclude name="**/ermapper.jar" />
                                        </fileset>
                                        <echo>Recompress jars</echo>
                                        <p200ant repack="true" quite="true">
                                            <fileset refid="jars2pack" />
                                        </p200ant>
                                    </target>
                                </configuration>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>fix permissions, zip portable distros</id>
                                <phase>package</phase>
                                <configuration>
                                      <target>
                                        <!-- Recompress to distro zips -->
                                        <echo>Zip CORE portable </echo>
                                        <zip
                                            destfile="${portable.filepath}/${portable.filename}-CORE.zip"
                                            level="9">
                                            <zipfileset dir="${portable.filepath}/core"
                                                        prefix="${version.string}-CORE" excludes="${project.binaries}" />
                                            <zipfileset dir="${portable.filepath}/core"
                                                        prefix="${version.string}-CORE" includes="${project.binaries}"
                                                        filemode="755" />
                                        </zip>
                                        <echo>Zip PLUS portable </echo>
                                        <zip
                                            destfile="${portable.filepath}/${portable.filename}-PLUS.zip"
                                            level="9">
                                            <zipfileset dir="${portable.filepath}/plus"
                                                        prefix="${version.string}-PLUS" excludes="${project.binaries}" />
                                            <zipfileset dir="${portable.filepath}/plus"
                                                        prefix="${version.string}-PLUS" includes="${project.binaries}"
                                                        filemode="755" />
                                        </zip>
                                    </target>
                                </configuration>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>installer</id>
            <properties>
              <installer.filename>${project.artifactId}-Installer-${version.string}</installer.filename>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-enforcer-plugin</artifactId>
                        <version>1.4.1</version>
                        <executions>
                            <execution>
                                <id>portable-is-active</id>
                                <goals>
                                    <goal>enforce</goal>
                                </goals>
                                <configuration>
                                    <rules>
                                        <requireActiveProfile>
                                            <profiles>portable</profiles>
                                            <all>true</all>
                                            <message>The installers are build using the portable distro zips!</message>
                                        </requireActiveProfile>
                                    </rules>
                                    <fail>true</fail>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>${maven-antrun-plugin.version}</version>
                        <executions>
                            <execution>
                                <id>create installers</id>
                                <phase>package</phase>
                                <configuration>
                                    <target>
                                        <property name="file.encoding" value="ISO-8859-1" />
                                        <delete includeemptydirs="true" quiet="true">
                                            <fileset dir="${project.build.directory}/izpack"
                                                     followsymlinks="false" />
                                        </delete>
                                        <!-- Using an ant task to deflate *.zip -->
                                        <unzip
                                            src="${portable.filepath}/${portable.filename}-CORE.zip"
                                            dest="${project.build.directory}/izpack/core/pack0">
                                            <cutdirsmapper dirs="1" />
                                        </unzip>
                                        <unzip
                                            src="${portable.filepath}/${portable.filename}-PLUS.zip"
                                            dest="${project.build.directory}/izpack/plus/pack0">
                                            <cutdirsmapper dirs="1" />
                                        </unzip>
                                        <!-- Set correct permissions for executables. Seems not to be respected 
                                        by izpack packer, hence it has to be done again in post-install -->
                                        <chmod dir="${project.build.directory}/izpack" perm="644" type="file"
                                               includes="**" verbose="true" />
                                        <chmod dir="${project.build.directory}/izpack" perm="755" type="dir"
                                               includes="**" verbose="true" />
                                        <chmod dir="${project.build.directory}/izpack" perm="755" type="file"
                                               includes="${project.binaries}" verbose="true" />

                                        <!-- prepare izpack environments -->
                                        <!-- jump through hoops to get special chars in readme infopanel 
                                        correct -->
                                        <copy file="${project.build.directory}/res/readme.txt"
                                              tofile="${project.build.directory}/izpack/readme.text.html" />
                                        <replace
                                            file="${project.build.directory}/izpack/readme.text.html"
                                            encoding="iso-8859-1">
                                            <replacefilter>
                                                <replacetoken>&amp;</replacetoken>
                                                <replacevalue>&amp;amp;</replacevalue>
                                            </replacefilter>
                                            <replacefilter>
                                                <replacetoken>&lt;</replacetoken>
                                                <replacevalue>&amp;lt;</replacevalue>
                                            </replacefilter>
                                            <replacefilter>
                                                <replacetoken>&gt;</replacetoken>
                                                <replacevalue>&amp;gt;</replacevalue>
                                            </replacefilter>
                                        </replace>
                                        <concat destfile="${project.build.directory}/izpack/readme.html"
                                                binary="yes">
                                            <fileset file="etc/izpack/res/readme.html.head" />
                                            <fileset
                                                file="${project.build.directory}/izpack/readme.text.html" />
                                            <fileset file="etc/izpack/res/readme.html.foot" />
                                        </concat>
                                        <!-- prepare different editions -->
                                        <filter token="edition" value="CORE" />
                                        <filter token="version" value="${version.number}" />
                                        <filter token="revision" value="${version.revision}" />
                                        <!-- copydir src="etc/izpack" dest="${project.build.directory}/izpack/core" 
                                        / -->
                                        <copy todir="${project.build.directory}/izpack/core">
                                            <fileset dir="etc/izpack" />
                                        </copy>
                                        <copy file="etc/izpack/oj_installer.xml" todir="${project.build.directory}/izpack/core/"
                                              filtering="true" overwrite="true" />
                                        <filter token="edition" value="PLUS" />
                                        <copy todir="${project.build.directory}/izpack/plus">
                                            <fileset dir="etc/izpack" />
                                        </copy>
                                        <copy file="etc/izpack/oj_installer.xml" todir="${project.build.directory}/izpack/plus/"
                                              filtering="true" overwrite="true" />
                                        <!-- Allows us to use the IzPack Ant task -->
                                        <taskdef name="IzPack"
                                                 classpath="launcher/IzPack-4.3.5/lib/standalone-compiler.jar"
                                                 classname="com.izforge.izpack.ant.IzPackTask" />
                                        <!-- We call IzPack -->
                                        <echo message="Make CORE installer" />
                                        <IzPack
                                            input="${project.build.directory}/izpack/core/oj_installer.xml"
                                            output="${project.build.directory}/izpack/${installer.filename}-CORE.jar"
                                            installerType="standard" basedir="${project.build.directory}/izpack/core/"
                                            IzPackDir="launcher/IzPack-4.3.5" />
                                        <echo message="Make PLUS installer" />
                                        <IzPack
                                            input="${project.build.directory}/izpack/plus/oj_installer.xml"
                                            output="${project.build.directory}/izpack/${installer.filename}-PLUS.jar"
                                            installerType="standard" basedir="${project.build.directory}/izpack/plus/"
                                            IzPackDir="launcher/IzPack-4.3.5" />
                                        <!-- generate exe launcher via launch4j -->
                                        <!-- property name="launch4j.dir" location="launcher/launch4j-3.0.2" 
                                        / -->
                                        <property name="launch4j.config"
                                                  location="etc/launch4j/ojinstall-launch4j.xml" />
                                        <taskdef name="launch4j" classname="net.sf.launch4j.ant.Launch4jTask"
                                                 classpath="${launch4j.dir}/launch4j.jar:${launch4j.dir}/lib/xstream.jar" />
                                        <launch4j configFile="${launch4j.config}"
                                                  jar="${project.build.directory}/izpack/${installer.filename}-CORE.jar"
                                                  outfile="${project.build.directory}/izpack/${installer.filename}-CORE.exe" />
                                        <launch4j configFile="${launch4j.config}"
                                                  jar="${project.build.directory}/izpack/${installer.filename}-PLUS.jar"
                                                  outfile="${project.build.directory}/izpack/${installer.filename}-PLUS.exe" />
                                    </target>
                                </configuration>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>javadoc8+ fix</id>
            <activation>
                <jdk>[1.8,)</jdk>
            </activation>
            <properties>

                <javadoc.opts>-Xdoclint:none</javadoc.opts>
            </properties>
        </profile>
        <profile>
            <id>javadoc</id>
            <properties>
              <!-- props used for zip naming naming -->
              <version.string>${version.number}-r${version.revision}</version.string>
              <build.name>${project.artifactId}-${version.string}</build.name>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-javadoc-plugin</artifactId>
                        <version>3.2.0</version>
                        <configuration>
                            <outputDirectory>${project.build.directory}/apidocs/</outputDirectory>
                            <reportOutputDirectory>${project.build.directory}/apidocs/</reportOutputDirectory>
                            <source>8</source>
                            <quiet>true</quiet>
                            <!-- 
                            java8+ enforces some strict checking, which we do not abide (yet?) 
                            also see https://stackoverflow.com/questions/39616344/how-to-disable-javadoc-warnings-in-maven-javadoc-plugin
                            -->
                            <doclint>none</doclint>
                        </configuration>
                        <executions>
                            <execution>
                                <id>generate javadocs</id>
                                <phase>compile</phase>
                                <goals>
                                    <!-- don't reinvoke 'generate-sources' -->
                                    <goal>javadoc-no-fork</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>${maven-antrun-plugin.version}</version>
                        <executions>
                            <execution>
                                <id>create apidoc zip</id>
                                <phase>package</phase>
                                <configuration>
                                    <target>
                                        <zip
                                            destfile="${project.build.directory}/${build.name}-apidocs.zip"
                                            level="9">
                                            <zipfileset dir="${project.build.directory}/apidocs" prefix="apidocs"/>
                                        </zip>
                                    </target>
                                </configuration>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
        <profile>
            <id>srczip</id>
            <properties>
              <!-- props used for zip naming naming -->
              <version.string>${version.number}-r${version.revision}</version.string>
              <build.name>${project.artifactId}-${version.string}</build.name>
            </properties>
            <build>
                <plugins>
                    <!-- for testing speedup disable compilation --> <!--
                    <plugin>
                      <groupId>org.apache.maven.plugins</groupId>
                      <artifactId>maven-compiler-plugin</artifactId>
                      <executions>
                        <execution>
                          <id>default-compile</id>
                          <configuration>
                            <skipMain>true</skipMain>
                          </configuration>
                        </execution>
                      </executions>
                    </plugin>
                    -->
                    <plugin>
                        <artifactId>maven-antrun-plugin</artifactId>
                        <version>${maven-antrun-plugin.version}</version>
                        <executions>
                            <execution>
                                <id>create src zip</id>
                                <phase>package</phase>
                                <configuration>
                                    <target>
                                        <zip
                                            destfile="${project.build.directory}/${build.name}-src.zip"
                                            level="9">
                                            <zipfileset dir="${project.build.directory}/classes" prefix="src" excludes="**/*.class"/>
                                        </zip>
                                    </target>
                                </configuration>
                                <goals>
                                    <goal>run</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
    <build>
        <finalName>${project.artifactId}-${version.string}</finalName>
        <sourceDirectory>src/</sourceDirectory>
        <outputDirectory>target/classes</outputDirectory>
        <resources>
            <resource>
                <directory>src</directory>
                <!-- we copy _everything_ to target/classes and filter during packaging -->
                <excludes>
                    <!-- exclude> **/*.java </exclude -->
                    <exclude>language/*.properties</exclude>
                </excludes>
            </resource>
            <resource>
                <filtering>true</filtering>
                <directory>src</directory>
                <includes>
                    <include>language/*.properties</include>
                </includes>
            </resource>
            <!-- filter version placeholders during copying -->
            <resource>
                <filtering>true</filtering>
                <directory>etc</directory>
                <includes>
                    <include>readme.txt</include>
                </includes>
                <targetPath>${project.build.directory}/res/</targetPath>
            </resource>
            <resource>
                <filtering>true</filtering>
                <directory>.</directory>
                <includes>
                    <include>Changes.txt</include>
                </includes>
                <targetPath>${project.build.directory}/res/</targetPath>
            </resource>
            <resource>
                <directory>etc</directory>
                <includes>
                    <include>log4j.xml</include>
                </includes>
            </resource>
        </resources>
        <plugins>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.8.1</version>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                </configuration>
            </plugin>

           <plugin>
              <groupId>org.codehaus.mojo</groupId>
              <artifactId>build-helper-maven-plugin</artifactId>
              <executions>
                <!-- build several build date stamp formattings used all over -->
                <execution>
                  <id>build-datestamp-property</id>
                  <phase>validate</phase>
                  <goals>
                    <goal>timestamp-property</goal>
                  </goals>
                  <configuration>
                    <name>build.datestamp</name>
                    <pattern>yyyyMMdd</pattern>
                    <!-- >timeZone>Europe/Amsterdam</timeZone -->
                    <timeSource>build</timeSource>
                    <locale>en_US</locale>
                  </configuration>
                </execution>
                <execution>
                  <id>build-datelong-property</id>
                  <phase>validate</phase>
                  <goals>
                    <goal>timestamp-property</goal>
                  </goals>
                  <configuration>
                    <name>build.datelong</name>
                    <pattern>dd. MMMM yyyy</pattern>
                    <timeSource>build</timeSource>
                    <locale>en_US</locale>
                  </configuration>
                </execution>
                <execution>
                  <id>build-date-property</id>
                  <phase>validate</phase>
                  <goals>
                    <goal>timestamp-property</goal>
                  </goals>
                  <configuration>
                    <name>build.date</name>
                    <pattern>dd.MM.yyyy</pattern>
                    <timeSource>build</timeSource>
                    <locale>en_US</locale>
                  </configuration>
                </execution>

                <execution>
                  <id>add-junit-test-source</id>
                  <phase>generate-test-sources</phase>
                  <goals>
                    <goal>add-test-source</goal>
                  </goals>
                  <configuration>
                    <sources>
                      <source>src/</source>
                    </sources>
                  </configuration>
                </execution>
              </executions>
            </plugin>

            <plugin>
              <groupId>pl.project13.maven</groupId>
              <artifactId>git-commit-id-plugin</artifactId>
              <version>4.0.4</version>
              <executions>
                <!-- retrieve git revision information from local repo -->
                <execution>
                  <id>get-the-git-infos</id>
                  <goals>
                    <goal>revision</goal>
                  </goals>
                  <phase>validate</phase>
                </execution>
              </executions>
              <configuration>
                <verbose>false</verbose>
                <generateGitPropertiesFile>false</generateGitPropertiesFile>
                <generateGitPropertiesFilename>${project.build.outputDirectory}/git.properties</generateGitPropertiesFilename>
                <!-->includeOnlyProperties>
                  <includeOnlyProperty>^git.build.(time|version)$</includeOnlyProperty>
                  <includeOnlyProperty>^git.commit.id.(abbrev|full)$</includeOnlyProperty>
                  <includeOnlyProperty>^git.total.commit.count$</includeOnlyProperty>
                </includeOnlyProperties-->
                <commitIdGenerationMode>full</commitIdGenerationMode>
              </configuration>
            </plugin>

            <plugin>
              <groupId>com.github.ekryd.echo-maven-plugin</groupId>
              <artifactId>echo-maven-plugin</artifactId>
              <version>1.3.2</version>
              <executions>
                <execution>
                  <id>echo-version-info</id>
                  <phase>initialize</phase>
                  <goals>
                    <goal>echo</goal>
                  </goals>
                  <configuration>
                    <message>Building
                      ${project.build.finalName}
                    </message>
                  </configuration>
                </execution>
              </executions>
            </plugin>

            <!-- default-jar only needed for maven repo deployment,
                 so postpone creation to install cycle  -->
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-jar-plugin</artifactId>
              <version>3.2.0</version>
              <executions>
                <execution>
                  <id>default-jar</id>
                  <phase>install</phase>
                </execution>
              </executions>
            </plugin>

            <!-- installing artifact to local repo (usually "~/.m2")
                 is mainly done to enable 
                   https://jitpack.io/#openjump-gis/openjump
                 repo builds -->
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-install-plugin</artifactId>
              <version>3.0.0-M1</version>
              <executions>
                <execution>
                  <id>default-install</id>
                  <phase>none</phase>
                  <goals>
                    <goal>install-file</goal>
                  </goals>
                </execution>
                <execution>
                  <id>custom-install-jar</id>
                  <goals>
                    <goal>install-file</goal>
                  </goals>
                  <phase>install</phase>
                  <configuration>
                    <packaging>jar</packaging>
                    <version>${version.string}</version>
                    <generatePom>true</generatePom>
                    <file>${project.build.directory}/${project.build.finalName}.jar</file>
                    <!-- 
                    <localRepositoryPath>${project.build.directory}/repo/</localRepositoryPath>
                    -->
                  </configuration>
                </execution>
              </executions>
            </plugin>

            <!-- this deploys the jar to a repo-url given
                 used in snapshot/release builds to update
                   oj.soldin.de repo -->
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-deploy-plugin</artifactId>
              <version>3.0.0-M1</version>
              <executions>
                <execution>
                  <id>default-deploy</id>
                  <phase>none</phase>
                </execution>
                <execution>
                  <id>custom-deploy</id>
                  <phase>deploy</phase>
                  <goals>
                    <goal>deploy-file</goal>
                  </goals>
                  <configuration>
                    <file>${project.build.directory}/${project.build.finalName}.jar</file>
                    <!-- needs to be set via -Durl=file://C:\m2-repo --> <!--
                    <url>file://${project.build.directory}/build-repo/</url>
                    -->
                    <version>${project.version}-SNAPSHOT</version>
                    <classifier>${version.string}</classifier>
                  </configuration>
                </execution>
              </executions>
            </plugin>

            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-surefire-plugin</artifactId>
              <version>2.19.1</version>
              <configuration>
                <argLine>-Djava.system.class.loader=com.vividsolutions.jump.workbench.plugin.PlugInClassLoader</argLine>
              </configuration>
            </plugin>
        </plugins>

    </build>
    <repositories>
        <repository>
            <id>Maven Central group</id>
            <name>Maven Central group Repository</name>
            <!--url>https://mvnrepository.com/artifact/</url-->
            <url>https://repo1.maven.org/maven2/</url>
        </repository>
        <!-- Used for buoy and JAI core, codec and imageio -->
        <repository>
            <id>openjump</id>
            <name>OpenJUMP Maven 2 Repository</name>
            <url>http://jump-pilot.sourceforge.net/repository/</url>
        </repository>
        <repository>
            <id>mvn-adamgent</id>
            <url>http://mvn-adamgent.googlecode.com/svn/maven/release</url>
            <name>Adam Gent Maven Repository</name>
        </repository>
        <repository>
            <id>apache.snapshots</id>
            <url>http://repository.apache.org/snapshots</url>
            <name>Apache Snapshots</name>
        </repository>
        <!-- osgeo keeps recent JAI codec, core, imageio jars -->
        <!-- not sure what is this repository for. Not enough to
        find JAI codec, core, imageio jars -->
        <repository>
            <id>osgeo</id>
            <name>Open Source Geospatial Foundation Repository</name>
            <url>http://download.osgeo.org/webdav/geotools/</url>
        </repository>
        <!-- deegree2 libs needed for WFS -->
        <!--repository>
            <id>deegree-snapshots</id>
            <name>Deegree Snaphots</name>
            <url>http://repo.deegree.org/content/repositories/snapshots/</url>
        </repository-->
        <!-- below the home of imageio-ext, needed for local compilation only
        for distribution jars are added manually in etc/mvn/*.cmp files -->
        <repository>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
            <id>imageio-ext-repository</id>
            <name>imageio-ext Repository</name>
            <url>http://maven.geo-solutions.it/</url>
        </repository>
        <!-- we got our custommade jts 1.14 snapshot from here, thx Michael Bedward -->
        <!--repository>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
            <id>sonatype-snapshots</id>
            <name>sonatype-snapshots</name>
            <url>http://oss.sonatype.org/content/repositories/snapshots/</url>
        </repository-->
    </repositories>
    <dependencies>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
            <scope>compile</scope>
        </dependency>
        <!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.7.30</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.7.30</version>
        </dependency>
        <dependency>
            <groupId>org.locationtech.jts</groupId>
            <artifactId>jts-core</artifactId>
            <version>${jts.version}</version>
        </dependency>
        <dependency>
            <groupId>org.locationtech.jts.io</groupId>
            <artifactId>jts-io-common</artifactId>
            <version>${jts.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache-extras.beanshell</groupId>
            <artifactId>bsh</artifactId>
            <version>2.0b6</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.orbisgis</groupId>
            <artifactId>cts</artifactId>
            <version>1.5.1</version>
        </dependency>
        <!--dependency>
          <groupId>jdom</groupId>
          <artifactId>jdom</artifactId>
          <version>1.0b8</version>
          <scope>compile</scope>
        </dependency-->
        <dependency>
            <groupId>org.jdom</groupId>
            <artifactId>jdom2</artifactId>
            <version>2.0.6</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>xerces</groupId>
            <artifactId>xercesImpl</artifactId>
            <version>2.12.1</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>42.2.19</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>batik</groupId>
            <artifactId>batik-awt-util</artifactId>
            <version>1.6</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>batik</groupId>
            <artifactId>batik-dom</artifactId>
            <version>1.6</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>batik</groupId>
            <artifactId>batik-svggen</artifactId>
            <version>1.6</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>batik</groupId>
            <artifactId>batik-squiggle</artifactId>
            <version>1.6</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>net.sf.buoy</groupId>
            <artifactId>buoy</artifactId>
            <version>1.9</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.github.yannrichet</groupId>
            <artifactId>JMathArray</artifactId>
            <version>1.0</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>com.github.yannrichet</groupId>
            <artifactId>JMathPlot</artifactId>
            <version>1.0.1</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>gov.nist.math</groupId>
            <artifactId>jama</artifactId>
            <version>1.0.3</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.13.2</version>
            <scope>compile</scope>
        </dependency>
        <!--Version 2.2.1 is the last of the unmaintained 2.2 series
        There is a 2.5.x anda 2.7 version but they both are much bigger
        don't know if we need them as only few people use jython-->
        <dependency>
            <groupId>org.python</groupId>
            <artifactId>jython</artifactId>
            <version>2.2.1</version>
        </dependency>
        <dependency>
            <groupId>org.tukaani</groupId>
            <artifactId>xz</artifactId>
            <version>1.8</version>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.15</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-compress</artifactId>
            <version>1.20</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-imaging</artifactId>
            <version>1.0-alpha2</version>
        </dependency>
        <dependency>
            <groupId>commons-io</groupId>
            <artifactId>commons-io</artifactId>
            <version>2.8.0</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.11</version>
        </dependency>
        <dependency>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>com.github.jai-imageio</groupId>
            <artifactId>jai-imageio-core</artifactId>
            <version>1.4.0</version>
        </dependency>
        <dependency>
            <groupId>javax.media</groupId>
            <artifactId>jai_core</artifactId>
            <version>1.1.3</version>
        </dependency>
        <dependency>
            <groupId>javax.media</groupId>
            <artifactId>jai_codec</artifactId>
            <version>1.1.3</version>
        </dependency>
        <dependency>
            <groupId>javax.media</groupId>
            <artifactId>jai_imageio</artifactId>
            <version>1.1</version>
        </dependency>
        <!-- we provide the imageio-ext jars here for compilation only,
        for runtime they are packaged from lib/imageio-ext/ for 
        easier updating and splitting between CORE and PLUS -->
        <dependency>
            <groupId>it.geosolutions.imageio-ext</groupId>
            <artifactId>imageio-ext-utilities</artifactId>
            <version>${imageio-ext.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>it.geosolutions.imageio-ext</groupId>
            <artifactId>imageio-ext-gdalframework</artifactId>
            <version>${imageio-ext.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>it.geosolutions.imageio-ext</groupId>
            <artifactId>imageio-ext-geocore</artifactId>
            <version>${imageio-ext.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
           <groupId>it.geosolutions.imageio-ext</groupId>
           <artifactId>imageio-ext-tiff</artifactId>
           <!-- downgrade, as > 1.1.13 does not load single band TIFFs properly -->
           <!-- not needed anymore as jai-imageio.core works fine and is preferred -->
           <!-- version>1.1.13</version -->
           <version>${imageio-ext.version}</version>
           <scope>provided</scope>
        </dependency>
        <!--Nico Ribot: 30 jan 2015. For JTreeTable : Datastore list of layers:--> 
        <dependency>
            <groupId>uk.gov.nationalarchives.thirdparty.netbeans</groupId>
            <artifactId>org-netbeans-swing-outline</artifactId>
            <version>7.2</version>
        </dependency>
        <dependency>
          <groupId>com.googlecode.json-simple</groupId>
          <artifactId>json-simple</artifactId>
          <version>1.1.1</version>
        </dependency>
    </dependencies>
</project>
